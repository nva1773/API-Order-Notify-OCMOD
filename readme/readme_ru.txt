ОПИСАНИЕ
Модификатор добавляет возможность осуществлять "GET" запросы через API для получения новых, не обработанных заказов.
Т.е. заказов, которые имеют Статус "Ожидиние" или "В обработке".
Также добавлена возможность вводить IP адрес пользователей, которым разрешен доступ к API, в виде маски используя "*".

УСТАНОВКА
Через установщик дополнений оперкарт:
 - перейдите в раздел "Установка дополнений/расширений" и нажмите кнопку "Загрузить";
 - выберите скачанный файл и дождитесь появления текста "Дополнение успешно установлено".
После установки очистите кэш модификаторов:
 - перейдите в "Менеджер дополнений" и нажмите кнопку "Обновить".
 
ИНФОРМАЦИЯ
Локализация: Английский, Русский, Украинский,
Поддержка предоставляется на следующих языках: Английский, Русский, Украинский,
OpenCart 3.0/ocStore 3.0
Метод активации: Без активации
Ioncube Loader: -
Обращение к серверу разработчика: -
Если сервер разработчика недоступен: Дополнение работает
Совместимо с шаблонами: *

НАСТРОЙКА
После установки модификатора, при необходимости, можно добавить пользователя API.
Для этого в админ-панели выберите "Система > Пользователи > API" и нажать кнопку "Добавить".
В появившейся форме ввести Имя и Ключ (или сгенерировать его) и изменить Статус на "Включено",
а также во вкладке IP-адреса добавить адрес или сыписок адресов, которым будет разрешен доступ к API.
Можно добавить адрес в виде маски, используя "*" (например, 192.168.*.*).

ТЕСТИРОВАНИЕ
Теперь можно начать запросы через API.
1. Получаем API-Token, используя Имя и Ключ:
https://you.site.url/index.php?route=api/login&api_username=API-USER&api_key=API-KEY
или, если используется Имя по умолчанию (Default), то только Ключ этого пользователя:
https://you.site.url/index.php?route=api/login&api_key=API-KEY
Если запрос прошел успешно, то получите ответ:
{"success":"true","api_token":"a4cf14c8c106cb0ab95c96b2ce","error":""}
копируем API-токен, он понадобится для доступа к информации о заказе.
Если нет, то возможны два варианта ответа:
{"success":"false","api_token":"","error":"Incorrect API username or key!"}
или
{"success":"false","api_token":"","error":"Your IP 192.169.12.1 нет доступа к API!"}
2. Используя API-токен, делаем запрос для получения необработанных ордеров:
https://you.site.url/index.php?route=api/sale/orders&api_token=a4cf14c8c106cb0ab95c96b2ce
получаем ответ, например:
{"success":"true","orders":[{"order_id":"1","customer":"Test Test","date_added":"09/06/2024 11:41:54" ,"total":"500.00 \u0433\u043d."}],"orders_total":1,"sale_total":500,"error":""}
3. Теперь зная номер нового заказа, делаем запрос о его полной информации:
https://you.site.url/index.php?route=api/sale/order&api_token=a4cf14c8c106cb0ab95c96b2ce&order_id=1
ответ:
{"success":"true","order_info":";-\n \u2116\u0437\u043c\u043e\u0435\u043d\u043d\u0430\u0430\u0430 32\u043b\u0435\u043d \u043d\u044f: 09\/06\/2024 11:41:54\u0436\u0438\u0438\u0438\u040 u0437 ;-\nMacBook\u041a\u0434\u0442\u0432\u0430\u0440\u0443: Product 16     \u4 u0442\u044c: 1\ ;-\n \u0431\u0430\u0436\u0456\u0441\u044c\u0436\u0435\u043 ;-\n","error":""}

Для удобства тестирования, во избежание ручной работы, в архиве testing-api.zip  находится файл "index.html",
с помощью которого все вышеописанное делается просто и наглядно. Просто распакуйте архив и запустите index.html в любом Интернет-браузере.
